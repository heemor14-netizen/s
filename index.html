<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© | ØµÙ†Ø§Ø¹ÙŠØ© ØµØ§Ù…Ø·Ø©</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --accent:#2563eb;
  --card:#ffffff;
  --text:#1e293b;
  --muted:#64748b;
  --star:#facc15;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Cairo',sans-serif;
  background:linear-gradient(135deg,#0f172a,#1e293b);
  color:#fff;
}
header{text-align:center;padding:40px 20px}
header p{color:#cbd5f5}
.search-box{max-width:500px;margin:30px auto}
.search-box input{width:100%;padding:14px;border-radius:12px;border:none}
.container{width:90%;max-width:1200px;margin:40px auto}
.section{margin-bottom:60px}
.section h2{border-right:6px solid var(--accent);padding-right:15px}
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:22px}
.card{background:var(--card);color:var(--text);border-radius:16px;padding:22px;box-shadow:0 15px 35px rgba(0,0,0,.2);cursor:pointer}
.card h3{margin:0}
.card p{color:var(--muted);font-size:14px}
.rating{color:var(--star);margin:6px 0}
.location{font-size:13px;color:#475569}
.dashboard{background:#fff;color:var(--text);padding:30px;border-radius:18px}
.dashboard input,select,button{width:100%;padding:12px;margin-bottom:15px;border-radius:10px}
.dashboard button{background:var(--accent);color:#fff;border:none;font-size:16px;cursor:pointer}
footer{text-align:center;padding:25px;color:#cbd5f5}
</style>
</head>
<body>

<header>
  <h1>Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© â€“ ØµÙ†Ø§Ø¹ÙŠØ© ØµØ§Ù…Ø·Ø©</h1>
  <p>Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ ÙŠØ¬Ù…Ø¹ ÙˆØ±Ø´ ÙˆØµÙ†Ø§ÙŠØ¹ÙŠØ© ØµÙ†Ø§Ø¹ÙŠØ© ØµØ§Ù…Ø·Ø©</p>
  <div class="search-box">
    <input type="text" id="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ØªØ®ØµØµ Ø£Ùˆ Ø§Ø³Ù… ÙˆØ±Ø´Ø©">
  </div>
</header>

<div class="container">

<section class="section">
<h2>ØµÙ†Ø§Ø¹ÙŠØ§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h2>
<div class="cards" id="carsCards"></div>
</section>

<section class="section">
<h2>Ø§Ù„ÙˆØ±Ø´ Ø§Ù„Ø¹Ø§Ù…Ø©</h2>
<div class="cards" id="generalCards"></div>
</section>

<section class="section">
<h2>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØµÙ†Ø§ÙŠØ¹ÙŠ</h2>
<div class="dashboard">
<button id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù€ Google</button>
<p id="userStatus"></p>

<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙˆØ±Ø´Ø©">
<input id="spec" placeholder="Ø§Ù„ØªØ®ØµØµ">
<select id="category">
  <option value="cars">ØµÙ†Ø§Ø¹ÙŠØ§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</option>
  <option value="general">Ø§Ù„ÙˆØ±Ø´ Ø§Ù„Ø¹Ø§Ù…Ø©</option>
</select>
<input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„">
<input id="loc" placeholder="Ø§Ù„Ù…ÙˆÙ‚Ø¹">
<select id="rate">
  <option value="5">â˜…â˜…â˜…â˜…â˜…</option>
  <option value="4">â˜…â˜…â˜…â˜…â˜†</option>
  <option value="3">â˜…â˜…â˜…â˜†â˜†</option>
</select>
<button onclick="addWorkshop()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ±Ø´Ø©</button>
</div>
</section>

</div>
<footer>Â© 2025 Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© â€“ ØµÙ†Ø§Ø¹ÙŠØ© ØµØ§Ù…Ø·Ø©</footer>

<!-- Firebase SDK Ø¹Ø¨Ø± CDN -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyD5MrbyqmXoGgFKB_gvY6DX_5bGdbTyh9o",
  authDomain: "heemo-d02f2.firebaseapp.com",
  projectId: "heemo-d02f2",
  storageBucket: "heemo-d02f2.appspot.com",
  messagingSenderId: "777552011368",
  appId: "1:777552011368:web:8dc7e8cc00644b23dc9bdd",
  measurementId: "G-B9FM723F42"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
document.getElementById('loginBtn').addEventListener('click', () => {
  signInWithPopup(auth, provider)
  .then(result => {
    const user = result.user;
    localStorage.setItem('user', JSON.stringify({name: user.displayName, email: user.email}));
    document.getElementById('userStatus').innerText = 'âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ€ ' + user.displayName;
  })
  .catch(error => {
    console.error(error);
    alert('ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ' + error.message);
  });
});

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ±Ø´ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
window.onload = function() {
  let saved = JSON.parse(localStorage.getItem('workshops')) || [];
  saved.forEach(w => renderWorkshop(w));
}

// Ø¥Ø¶Ø§ÙØ© ÙˆØ±Ø´Ø©
window.addWorkshop = function() {
  if(!localStorage.getItem('user')){
    alert('Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø£ÙˆÙ„Ø§Ù‹');
    return;
  }

  let w = {
    name: name.value,
    spec: spec.value,
    cat: category.value,
    phone: phone.value,
    loc: loc.value,
    rate: rate.value
  };

  let data = JSON.parse(localStorage.getItem('workshops')) || [];
  data.push(w);
  localStorage.setItem('workshops', JSON.stringify(data));

  renderWorkshop(w);

  document.getElementById('name').value='';
  document.getElementById('spec').value='';
  document.getElementById('phone').value='';
  document.getElementById('loc').value='';
}

// Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© ÙˆØ±Ø´Ø©
function renderWorkshop(w){
  let stars='â˜…â˜…â˜…â˜…â˜…â˜†â˜†â˜†â˜†â˜†'.slice(5-w.rate,10-w.rate);
  let card=document.createElement('div');
  card.className='card';
  card.dataset.search=w.name+' '+w.spec;
  card.onclick=()=>openDetails(card);
  card.innerHTML=`
    <h3>${w.name}</h3>
    <p>${w.spec}</p>
    <div class="rating">${stars}</div>
    <div class="location">ğŸ“ ${w.phone}</div>
    <div class="location">ğŸ“ ${w.loc}</div>
  `;
  document.getElementById(w.cat+'Cards').appendChild(card);
}

// ÙØªØ­ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ±Ø´Ø©
window.openDetails = function(card){
  const w = {
    name: card.querySelector('h3').innerText,
    spec: card.querySelector('p').innerText,
    phone: card.querySelectorAll('.location')[0].innerText,
    loc: card.querySelectorAll('.location')[1].innerText
  };
  localStorage.setItem('currentWorkshop', JSON.stringify(w));
  window.location.href = 'details.html';
}

// Ø§Ù„Ø¨Ø­Ø«
document.getElementById('search').addEventListener('keyup', e => {
  let v = e.target.value.toLowerCase();
  document.querySelectorAll('.card').forEach(c => {
    c.style.display = c.dataset.search.toLowerCase().includes(v) ? 'block' : 'none';
  });
});
</script>

</body>
</html>
