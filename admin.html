<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø·ÙˆØ±</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Cairo',sans-serif;
  background:#0f172a;
  color:#fff;
}
.container{
  max-width:900px;
  margin:30px auto;
}
h1{text-align:center}

form{
  background:#fff;
  color:#1e293b;
  padding:20px;
  border-radius:16px;
  margin-bottom:30px;
}
input,select,textarea,button{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #cbd5f5;
  font-family:'Cairo';
}
textarea{resize:none}
button{
  background:#2563eb;
  color:#fff;
  border:none;
  cursor:pointer;
}
button:hover{opacity:.9}

.workshops{
  display:grid;
  gap:15px;
}
.card{
  background:#fff;
  color:#1e293b;
  padding:15px;
  border-radius:14px;
  position:relative;
}
.card small{color:#64748b}
.del{
  position:absolute;
  top:10px;
  left:10px;
  background:red;
  color:#fff;
  border:none;
  padding:5px 10px;
  border-radius:6px;
  cursor:pointer;
}
.back{
  display:block;
  text-align:center;
  margin-top:20px;
  color:#cbd5f5;
  text-decoration:none;
}
.success{
  color:green;
  font-weight:700;
  margin-bottom:10px;
}
</style>
</head>

<body>

<div class="container">

<h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ÙˆØ±Ø´</h1>

<form id="form">
  <div id="msg"></div>

  <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙˆØ±Ø´Ø©" required>
  <input id="spec" placeholder="Ø§Ù„ØªØ®ØµØµ" required>

  <textarea id="desc" placeholder="ÙˆØµÙ Ø§Ù„ÙˆØ±Ø´Ø©" rows="4" required></textarea>

  <select id="cat" required>
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
    <option value="cars">Ø³ÙŠØ§Ø±Ø§Øª</option>
    <option value="metal">Ø­Ø¯Ø§Ø¯Ø©</option>
    <option value="sofa">ÙƒÙ†Ø¨</option>
    <option value="aluminum">Ø£Ù„Ù…Ù†ÙŠÙˆÙ…</option>
  </select>

  <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„" required
         oninput="this.value=this.value.replace(/[^0-9]/g,'')">

  <input id="loc" placeholder="Ø­Ø¯Ø¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ø®Ø±ÙŠØ·Ø©" readonly required>
  <button type="button" onclick="openMap()">ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ù‚ÙˆÙ‚Ù„ Ù…Ø§Ø¨</button>

  <button type="submit">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ±Ø´Ø©</button>
</form>

<div class="workshops" id="list"></div>

<a class="back" href="index.html">â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ÙˆÙ‚Ø¹</a>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc }
from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBdhesRwD2eiDvqqcMGhC59U4whICwTO3E",
  authDomain: "sanaeya-samtah.firebaseapp.com",
  projectId: "sanaeya-samtah",
  storageBucket: "sanaeya-samtah.firebasestorage.app",
  messagingSenderId: "1092994215610",
  appId: "1:1092994215610:web:e68b5a3eccb24235d39c83"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const form = document.getElementById("form");
const list = document.getElementById("list");
const msg = document.getElementById("msg");

form.onsubmit = async e => {
  e.preventDefault();

  const data = {
    name: name.value.trim(),
    spec: spec.value.trim(),
    description: desc.value.trim(),
    cat: cat.value,
    phone: phone.value.trim(),
    loc: loc.value.trim()
  };

  await addDoc(collection(db,"workshops"), data);

  msg.innerHTML = "<div class='success'>âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ±Ø´Ø© Ø¨Ù†Ø¬Ø§Ø­</div>";
  form.reset();
  load();
};

async function load(){
  list.innerHTML="";
  const q = await getDocs(collection(db,"workshops"));
  q.forEach(d=>{
    const w=d.data();
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      <strong>${w.name}</strong>
      <small>${w.spec}</small>
      <p>${w.description}</p>
      <small>ğŸ“ ${w.phone}</small><br>
      <small>ğŸ“ ${w.loc}</small>
    `;
    const b=document.createElement("button");
    b.className="del";
    b.innerText="Ø­Ø°Ù";
    b.onclick=()=>del(d.id);
    c.appendChild(b);
    list.appendChild(c);
  });
}

async function del(id){
  await deleteDoc(doc(db,"workshops",id));
  load();
}

window.openMap = () => {
  window.open("https://www.google.com/maps","_blank");
  alert("ğŸ“ Ø­Ø¯Ù‘Ø¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø«Ù… Ø§Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„ØµÙ‚Ù‡ Ù‡Ù†Ø§");
};

load();
</script>

</body>
</html>

